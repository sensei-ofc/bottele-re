// ---‚ü© By Ado github.com/Ado-rgb
function _0x13ce(_0x3077b8,_0x26569c){const _0x58ec3c=_0x58ec();return _0x13ce=function(_0x13ce10,_0x170687){_0x13ce10=_0x13ce10-0xea;let _0x41a44f=_0x58ec3c[_0x13ce10];return _0x41a44f;},_0x13ce(_0x3077b8,_0x26569c);}const _0x25267d=_0x13ce;(function(_0x12a6fc,_0x235800){const _0x21bf91=_0x13ce,_0x4fda3c=_0x12a6fc();while(!![]){try{const _0x816962=-parseInt(_0x21bf91(0xec))/0x1*(-parseInt(_0x21bf91(0x110))/0x2)+parseInt(_0x21bf91(0x106))/0x3+-parseInt(_0x21bf91(0xee))/0x4+-parseInt(_0x21bf91(0x10e))/0x5*(parseInt(_0x21bf91(0xf2))/0x6)+-parseInt(_0x21bf91(0x11a))/0x7*(-parseInt(_0x21bf91(0xf6))/0x8)+-parseInt(_0x21bf91(0xeb))/0x9+parseInt(_0x21bf91(0x101))/0xa*(parseInt(_0x21bf91(0x113))/0xb);if(_0x816962===_0x235800)break;else _0x4fda3c['push'](_0x4fda3c['shift']());}catch(_0x4d9119){_0x4fda3c['push'](_0x4fda3c['shift']());}}}(_0x58ec,0xa9a0d));import _0x2b82f7 from'node-fetch';const gemini={'getNewCookie':async function(){const _0x4c46ca=_0x13ce,_0x3dff81=await _0x2b82f7(_0x4c46ca(0xfc),{'headers':{'content-type':_0x4c46ca(0x114)},'body':_0x4c46ca(0xf8),'method':_0x4c46ca(0x117)}),_0x31dab2=_0x3dff81[_0x4c46ca(0x105)][_0x4c46ca(0x103)](_0x4c46ca(0xf4));if(!_0x31dab2)throw new Error(_0x4c46ca(0x111));return _0x31dab2[_0x4c46ca(0xf0)](';')[0x0];},'ask':async function(_0x404f2d,_0xc63e56=null){const _0x219411=_0x13ce;if(typeof _0x404f2d!==_0x219411(0x10d)||!_0x404f2d?.[_0x219411(0xfd)]()?.[_0x219411(0xfb)])throw new Error('El\x20prompt\x20proporcionado\x20no\x20es\x20v√°lido.');let _0x1dd3d1=null,_0x45c2a4=null;if(_0xc63e56)try{const _0xa503af=atob(_0xc63e56),_0x16b304=JSON['parse'](_0xa503af);_0x1dd3d1=_0x16b304[_0x219411(0x10f)],_0x45c2a4=_0x16b304['cookie'];}catch(_0x1e5362){console[_0x219411(0xf1)](_0x219411(0x11d),_0x1e5362),_0xc63e56=null;}const _0x4c7985={'content-type':_0x219411(0x114),'x-goog-ext-525001261-jspb':'[1,null,null,null,\x229ec249fc9ad08861\x22,null,null,null,[4]]','cookie':_0x45c2a4||await this['getNewCookie']()},_0x12dd9a=[[_0x404f2d],[_0x219411(0x109)],_0x1dd3d1],_0x1ad52d=[null,JSON[_0x219411(0xef)](_0x12dd9a)],_0x45e1e5={'f.req':JSON[_0x219411(0xef)](_0x1ad52d)},_0x342c24=new URLSearchParams(_0x45e1e5),_0x385d37=await _0x2b82f7('https://gemini.google.com/_/BardChatUi/data/assistant.lamda.BardFrontendService/StreamGenerate?bl=boq_assistant-bard-web-server_20250729.06_p0&f.sid=4206607810970164620&hl=es-ES&_reqid=2813378&rt=c',{'headers':_0x4c7985,'body':_0x342c24,'method':_0x219411(0xea)});if(!_0x385d37['ok'])throw new Error(_0x385d37[_0x219411(0x11b)]+'\x20'+_0x385d37[_0x219411(0x118)]+'\x20'+(await _0x385d37['text']()||_0x219411(0xed)));const _0x54a1a2=await _0x385d37[_0x219411(0x112)](),_0x2b4cb2=_0x54a1a2['matchAll'](/^\d+\n(.+?)\n/gm),_0xe1dae3=Array[_0x219411(0x11c)](_0x2b4cb2,_0x7d765=>_0x7d765[0x1]);let _0x302813,_0x467931,_0x248db3=![];for(const _0xf8ddc2 of _0xe1dae3[_0x219411(0x108)]()){try{const _0x5e1143=JSON['parse'](_0xf8ddc2),_0xf504b9=JSON[_0x219411(0xf9)](_0x5e1143[0x0][0x2]);if(_0xf504b9&&_0xf504b9[0x4]&&_0xf504b9[0x4][0x0]&&_0xf504b9[0x4][0x0][0x1]&&typeof _0xf504b9[0x4][0x0][0x1][0x0]==='string'){_0x467931=[..._0xf504b9[0x1],_0xf504b9[0x4][0x0][0x0]],_0x302813=_0xf504b9[0x4][0x0][0x1][0x0][_0x219411(0xf3)](/\*\*(.+?)\*\*/g,_0x219411(0x100)),_0x248db3=!![];break;}}catch(_0x1553e0){}}if(!_0x248db3)throw new Error('No\x20se\x20pudo\x20interpretar\x20la\x20respuesta\x20del\x20API.\x20Puede\x20que\x20haya\x20cambiado\x20la\x20estructura.');const _0x2d4d88=btoa(JSON[_0x219411(0xef)]({'newResumeArray':_0x467931,'cookie':_0x4c7985[_0x219411(0x10c)]}));return{'text':_0x302813,'id':_0x2d4d88};}},geminiSessions={};let handler=async(_0x568d26,{conn:_0x1caec2,text:_0x1a5fac,usedPrefix:_0x131c27,command:_0x224edf})=>{const _0x325e26=_0x13ce;if(!_0x1a5fac)return _0x1caec2[_0x325e26(0x116)](_0x568d26[_0x325e26(0x119)],{'text':_0x325e26(0x10a)+(_0x131c27+_0x224edf)+'\x20¬øCu√°l\x20es\x20la\x20capital\x20de\x20Australia?\x0a',...global['rcanal']},{'quoted':_0x568d26});if(_0x1a5fac['toLowerCase']()==='--reset')return delete geminiSessions[_0x568d26[_0x325e26(0x107)]],_0x1caec2[_0x325e26(0x116)](_0x568d26[_0x325e26(0x119)],{'text':_0x325e26(0x104),...global['rcanal']},{'quoted':_0x568d26});await _0x568d26['react']('ü§î');try{const _0x31e246=geminiSessions[_0x568d26[_0x325e26(0x107)]],_0x1ef625=await gemini[_0x325e26(0xf7)](_0x1a5fac,_0x31e246);geminiSessions[_0x568d26[_0x325e26(0x107)]]=_0x1ef625['id'],await _0x1caec2[_0x325e26(0x116)](_0x568d26[_0x325e26(0x119)],{'text':_0x1ef625['text'],...global['rcanal']},{'quoted':_0x568d26}),await _0x568d26['react']('‚úÖ');}catch(_0x22ac05){console[_0x325e26(0xf1)](_0x22ac05),await _0x568d26[_0x325e26(0xfe)]('‚ùå'),await _0x1caec2['sendMessage'](_0x568d26[_0x325e26(0x119)],{'text':_0x325e26(0xff)+_0x22ac05[_0x325e26(0x10b)],...global['rcanal']},{'quoted':_0x568d26});}};function _0x58ec(){const _0x3e028f=['tags','get','ü§ñ\x20Historial\x20de\x20conversaci√≥n\x20reiniciado.','headers','507294HJABSX','sender','reverse','es-ES','‚úø\x20Ingresa\x20un\x20*prompt*.\x0a\x0a*Ejemplo:*\x20','message','cookie','string','5XpjtiL','newResumeArray','116878IobcTl','No\x20se\x20encontr√≥\x20la\x20cookie\x20en\x20la\x20respuesta.','text','10697093CeWDPU','application/x-www-form-urlencoded;charset=UTF-8','gemini','sendMessage','POST','statusText','chat','7biLHnB','status','from','No\x20se\x20pudo\x20parsear\x20el\x20previousId,\x20iniciando\x20nueva\x20conversaci√≥n.','post','7576281sQXNEb','11mkZrjK','(Respuesta\x20vac√≠a)','4962252RMqCNI','stringify','split','error','389634fnWWyF','replace','set-cookie','command','8461744dlgOyq','ask','f.req=%5B%5B%5B%22maGuAc%22%2C%22%5B0%5D%22%2Cnull%2C%22generic%22%5D%5D%5D&','parse','help','length','https://gemini.google.com/_/BardChatUi/data/batchexecute?rpcids=maGuAc&source-path=%2F&bl=boq_assistant-bard-web-server_20250814.06_p1&f.sid=-7816331052118000090&hl=en-US&_reqid=173780&rt=c','trim','react','‚úò\x20Ocurri√≥\x20un\x20error\x20al\x20procesar\x20tu\x20petici√≥n.\x0a\x0a*Error:*\x20','*$1*','10DkTAki'];_0x58ec=function(){return _0x3e028f;};return _0x58ec();}handler[_0x25267d(0xfa)]=[_0x25267d(0x115)],handler[_0x25267d(0x102)]=['ia'],handler[_0x25267d(0xf5)]=/^(gemini)$/i;export default handler;
